# 20210723白板

+ 前面内容的回顾
  + jmeter工具来写脚本
  + jmeter性能场景设计
  + 性能监控和监控平台
    + zabbix

+ jmeter工具写性能测试脚本：

  + jmeter
    + 运行环境：jre、jdk
    + 目录
      + 获取帮助 ----
      + 存放第三方插件的路径：jmeter的lib\ext
      + bin:  jmeter.properties
    + gui元件
      + 线程组： 性能测试时，性能场景设计
      + 取样器： 不同协议选择不同的取样器，写脚本
      + 监听器： 查看响应的数据
      + 配置元件：优先级是最高，最先被执行
        + http消息头
        + 用户定义变量
      + 前置处理
        + 在取样器执行执行被执行
        + 用户参数
      + 后置处理器
        + 在取样器执行之后被执行
        + json提取器、正则提取器
      + 取样器
      + 逻辑控制器
        + if控制器、循环控制、foreach控制、事务控制器
      + 断言

  + 用户定义变量  vs 用户参数的区别：

    + 用户定义变量：它是全局变量，在启动时，获取一次值，在运行过程中，不会动态获取值

      + 全局变量，是可以跨线程组，但是，它的值一直都不会变

    + 用户参数：局部变量，在启动时，获取一次值，在运行过程中，还会动态获取值

      + 不能直接跨线程组传参

    + 用户属性：这个属性是jmeter工具的标签，可以在jmeter整个工具中被使用

      + 静态属性： 写在 .properties 结尾的文件中的配置

        + jmeter属性(有静态属性， 也有动态属性)
        + 系统属性(只有静态的)

      + 动态属性

        + 设置属性函数：setProperty  
        + 获取属性函数：property  P

        函数 需要大家自己去回顾一下

    + csv数据文件设置：
      + 元件？ ==== 配置元件
      + 它获取到的值，可以被跨线程组

+ jmeter中可以直接写哪些开发语言的脚本？ ===== Java   、groovy、 jython （python2.7）、js
+ http代理服务器=----录制脚本
+ 关联： 前面接口返回的动态值，作为后续接口的传入参数值
+ http、soap、websocket、mq、dubbo、jdbc
+ DDT数据驱动性能测试
  + 准备测试数据，用测试数据驱动性能测试
  + csv\txt  + csv数据文件设置
  + jdbc： 把我们需要的、动态生成的一些测试数据，写入数据库(sqlite \ mysql)，也可以同时写入txt



jmeter写的性能测试脚本，可以简单转换为功能、自动化测试脚本，但是，反过来不行。



+ 场景设置
  + 普遍线程组： 线程数 + ramp-up  + （勾选循环次数永远 + 调度器）
    + 聚合报告： 
      + 时间的单位：ms
      + 吞吐量：看吞吐量的两个前提条件？ ---是一个平均值，常把它的值当作tps的值
        + 并发用户数不变
        + 没有网络瓶颈
      + 吞吐率：计算出，是否有网络瓶颈，你的带宽是否村成为瓶颈
      + 每一行： 都是一种 事务
        + 事务、jmeter的取样器、jmeter的接口有什么区别？
          + 在jmeter中，默认一个取样器，只能写一个接口，也是一种事务
          + 但是，事务可以是多个接口(多个取样器)，通过事务控制器，合并成为一个事务
  + 阶梯线程组：用于获取最大并发用户数
    + 插件： jpgc 
    + stepping thread group
      + 每次递增的并发用户数，是一个固定值
    + 监听器：
      + 活跃线程数图
      + 随着时间变化响应时间图
      + tps
      + 图的看法： 在相同并发用户数时，响应时间平均线， tps的平均线
  + 终极线程组
    + 设置： 有时间规律的请求场景
    + 也可以设置  阶梯线程
  + 面向目标
    + 可以面向多少tps
    + 可以设置是否能支持多少并发用户数
  + 混合场景
    + 不同数据量的人，使用不同的接口，向服务器发起请求

+ 性能监控：
  + ServerAgent 可以和jmeter集成，在jmeter中看到监控数据
    + 只能看到硬件资源监控
  + nmon： 可以不依赖于任何一款性能测试工具。
    + 更多时监控硬件资源
    + 在使用前，先确认你的服务器发行版本
    + 三种模式
  + grafana + influxdb  + jmeter集成  ====监控平台
    + influxbd  时序数据库
      + 版本： 1.x
    + grafana  前端
    + jmeter： 数据写入influxdb
      + 后端监听器
  + grafana + prometheus 监控平台 ==========重点学习
    + prometheus： 时序数据库
      + prometheus.yml 配置
    + node_exporter   数据收集 硬件资源数据
  + zabbix
    + 成熟企业服务器监控平台
  + jenkins  持续集成
  + cli模式
  + 分布式

---------再次讲解 zabbix

http://zabbix_ip     Admin/zabbix

zabbix server 没有启动 selinux 配置需要修改 

vim /etc/selinux/config